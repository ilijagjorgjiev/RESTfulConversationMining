<!DOCTYPE html>

<meta charset="utf-8">
<title>Dagre Interactive Demo</title>

<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://dagrejs.github.io/project/graphlib-dot/v0.6.3/graphlib-dot.js"></script>
<script src="/Users/ilijagjorgjiev/node_modules/dagre-d3/dist/dagre-d3.js"></script>
<script src="data.js"></script>
<!-- <script type="text/javascript" src="setup.js"></script> -->
<link rel="stylesheet" href="styles.css">


<body>

<svg width='800' height = '600'></svg>

<script>
// Input related code goes here
// Create the input graph

var g = new dagreD3.graphlib.Graph()
  .setGraph({})
  .setDefaultEdgeLabel(function() { return {}; });

// Here we"re setting nodeclass, which is used by our custom drawNodes function
// below.
g.setNode("start", { shape: "circle" });
g.setNode("end", {shape: "circle", style: "stroke-width: 4; stroke: black"})
for(let i = 0; i < clients["154.103.165.66"].length; i++){
  g.setNode(i, {label: "Method: "+ clients["154.103.165.66"][i].method + '\n' + 'Status: '+ clients["154.103.165.66"][i].status + '\n' +"Location:"+clients["154.103.165.66"][i].location, class: "type-"  + clients["154.103.165.66"][i].method})
}
g.nodes().forEach(function(v) {
  var node = g.node(v);
  // Round the corners of the nodes
  node.rx = node.ry = 5;
});

// Set up edges, no special attributes.
g.setEdge("start",0)
for(let i = 1; i < clients["154.103.165.66"].length; i++){
  g.setEdge(i-1,i);
}
g.setEdge("end",clients["154.103.165.66"].length-1)

// Create the renderer
var render = new dagreD3.render();
console.log(g)

// Set up an SVG group so that we can translate the final graph.
var svg = d3.select("svg"),
    svgGroup = svg.append("g");

// Run the renderer. This is what draws the final graph.
render(d3.select("svg g"), g);

// Center the graph
var xCenterOffset = (svg.attr("width") - g.graph().width) / 2;
svgGroup.attr("transform", "translate(" + xCenterOffset + ", 20)");
svg.attr("height", g.graph().height + 40);
</script>
